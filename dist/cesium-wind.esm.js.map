{"version":3,"file":"cesium-wind.esm.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/wind-core/src/utils.ts","../node_modules/wind-core/src/Vector.ts","../node_modules/wind-core/src/Field.ts","../node_modules/wind-core/src/index.ts","../src/main.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import Field from './Field';\n\nif (!Array.isArray) {\n  // @ts-ignore\n  Array.isArray = function(arg: any) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\nif (typeof Object.assign != 'function') {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, \"assign\", {\n    value: function assign(target: any, varArgs: any) { // .length of function is 2\n      'use strict';\n      if (target == null) { // TypeError if undefined or null\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      let to = Object(target);\n\n      for (let index = 1; index < arguments.length; index++) {\n        const nextSource = arguments[index];\n\n        if (nextSource != null) { // Skip over if undefined or null\n          for (let nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true\n  });\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst symToStringTag = typeof Symbol !== 'undefined' ? Symbol.toStringTag : undefined;\n\nfunction baseGetTag (value: any) {\n  if (value === null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n  if (!(symToStringTag && symToStringTag in Object(value))) {\n    return toString.call(value)\n  }\n  const isOwn = hasOwnProperty.call(value, symToStringTag);\n  const tag = value[symToStringTag];\n  let unmasked = false;\n  try {\n    value[symToStringTag] = undefined;\n    unmasked = true\n  } catch (e) {\n  }\n\n  const result = Object.prototype.toString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport function TypeOf(value: any) {\n  return Object.prototype.toString.call(value).slice(8, -1).toLowerCase()\n}\n\n/**\n * 判断是否为函数\n * @param value\n * @returns {boolean}\n */\nexport function isFunction (value: any): boolean {\n  if (!isObject(value)) {\n    return false\n  }\n  const tag = baseGetTag(value);\n  return tag === '[object Function]' || tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' || tag === '[object Proxy]';\n}\n\n/**\n * 判断是否为对象\n * @param value\n * @returns {boolean}\n */\nexport function isObject(value: any) {\n  const type = typeof value;\n  return value !== null && (type === 'object' || type === 'function')\n}\n\n/**\n * is date value\n * @param val\n * @returns {boolean}\n */\nexport function isDate (val: any) {\n  return Object.prototype.toString.call(val) === '[object Date]';\n}\n\n/**\n * is array buffer\n * @param val\n * @returns {boolean}\n */\nexport function isArrayBuffer(val: any) {\n  return Object.prototype.toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * 判断是否为合法字符串\n * @param value\n * @returns {boolean}\n */\nexport function isString (value: any): boolean {\n  if (value == null) {\n    return false;\n  }\n  return typeof value === 'string' || (value.constructor !== null && value.constructor === String);\n}\n\n/**\n * 判断是否为数字\n * @param value\n * @returns {boolean}\n */\nexport function isNumber (value: any) {\n  return Object.prototype.toString.call(value) === '[object Number]' && !isNaN(value);\n}\n\n/**\n * check isEmpty object\n * @param object\n * @returns {boolean}\n */\nexport function isEmpty (object: {}) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n\n/**\n * check is null\n * @param obj\n * @returns {boolean}\n */\nexport function isNull (obj: any) {\n  return obj == null;\n}\n\n/**\n * check is array\n * @param arr\n */\nexport function isArray(arr: any): boolean {\n  return Array.isArray(arr);\n}\n\n/**\n * assign object\n * @param target\n * @param sources\n */\nexport function assign(target: object, ...sources: any[]) {\n  return Object.assign(target, ...sources);\n}\n\nexport function warnLog(msg: string) {\n  console.warn(`wind-layer: ${msg}`);\n}\n\n/**\n * Get floored division\n * @param a\n * @param n\n * @returns {Number} returns remainder of floored division,\n * i.e., floor(a / n). Useful for consistent modulo of negative numbers.\n * See http://en.wikipedia.org/wiki/Modulo_operation.\n */\nexport function floorMod (a: number, n: number) {\n  return a - n * Math.floor(a / n);\n}\n\n/**\n * 检查值是否合法\n * @param val\n * @returns {boolean}\n */\nexport function isValide(val: any) {\n  return val !== undefined && val !== null && !isNaN(val);\n}\n\nexport interface IGFSItem {\n  header: {\n    parameterCategory: number | string;\n    parameterNumber: number | string;\n    dx: number;\n    dy: number;\n    nx: number;\n    ny: number;\n    lo1: number;\n    lo2: number;\n    la1: number;\n    la2: number;\n    [key: string]: any;\n  };\n  data: number[];\n}\n\n/**\n * format gfs json to vector\n * @param data\n */\nexport function formatData(data: IGFSItem[]) {\n  let uComp: IGFSItem;\n  let vComp: IGFSItem;\n\n  if ((process.env.NODE_ENV as string) === ('development' as string)) {\n    console.time('format-data');\n  }\n\n  data.forEach(function (record: IGFSItem) {\n    switch (record.header.parameterCategory + \",\" + record.header.parameterNumber) {\n      case \"1,2\":\n      case \"2,2\":\n        uComp = record;\n        break;\n      case \"1,3\":\n      case \"2,3\":\n        vComp = record;\n        break;\n    }\n  });\n\n  // @ts-ignore\n  if (!vComp || !uComp) return;\n\n  const header = uComp.header;\n  const vectorField = new Field({\n    xmin: header.lo1, // 一般格点数据是按照矩形范围来切割，所以定义其经纬度范围\n    ymin: header.la1,\n    xmax: header.lo2,\n    ymax: header.la2,\n    deltaX: header.dx, // x（经度）增量\n    deltaY: header.dy, // y（维度）增量\n    cols: header.nx, // 列（可由 `(xmax - xmin) / deltaX` 得到）\n    rows: header.ny, // 行\n    us: uComp.data, // U分量\n    vs: vComp.data, // V分量\n    // wrappedX: false,\n  });\n\n  if ((process.env.NODE_ENV as string) === ('development' as string)) {\n    console.timeEnd('format-data');\n  }\n\n  return vectorField;\n}\n\n/**\n * create canvas\n * @param width\n * @param height\n * @param retina\n * @param Canvas\n * @returns {HTMLCanvasElement}\n */\nexport function createCanvas(width: number, height: number, retina: number, Canvas?: any): HTMLCanvasElement {\n  if (typeof document !== 'undefined') {\n    const canvas = document.createElement('canvas');\n    canvas.width = width * retina;\n    canvas.height = height * retina;\n    return canvas\n  } else {\n    // create a new canvas instance in node.js\n    // the canvas class needs to have a default constructor without any parameter\n    return new Canvas(width * retina, height * retina);\n  }\n}\n\n\n/**\n * 移除 dom\n * @param node\n * @returns {removeDomNode}\n */\nexport function removeDomNode(node: HTMLElement | HTMLCanvasElement) {\n  if (!node) {\n    return null;\n  }\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n  return node;\n}\n\nconst keyword = /(\\D+)/;\nconst hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n// eslint-disable-next-line no-useless-escape\nconst rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\nconst colorNames: {\n  [key: string]: number[]\n} = {\n  'aliceblue': [240, 248, 255],\n  'antiquewhite': [250, 235, 215],\n  'aqua': [0, 255, 255],\n  'aquamarine': [127, 255, 212],\n  'azure': [240, 255, 255],\n  'beige': [245, 245, 220],\n  'bisque': [255, 228, 196],\n  'black': [0, 0, 0],\n  'blanchedalmond': [255, 235, 205],\n  'blue': [0, 0, 255],\n  'blueviolet': [138, 43, 226],\n  'brown': [165, 42, 42],\n  'burlywood': [222, 184, 135],\n  'cadetblue': [95, 158, 160],\n  'chartreuse': [127, 255, 0],\n  'chocolate': [210, 105, 30],\n  'coral': [255, 127, 80],\n  'cornflowerblue': [100, 149, 237],\n  'cornsilk': [255, 248, 220],\n  'crimson': [220, 20, 60],\n  'cyan': [0, 255, 255],\n  'darkblue': [0, 0, 139],\n  'darkcyan': [0, 139, 139],\n  'darkgoldenrod': [184, 134, 11],\n  'darkgray': [169, 169, 169],\n  'darkgreen': [0, 100, 0],\n  'darkgrey': [169, 169, 169],\n  'darkkhaki': [189, 183, 107],\n  'darkmagenta': [139, 0, 139],\n  'darkolivegreen': [85, 107, 47],\n  'darkorange': [255, 140, 0],\n  'darkorchid': [153, 50, 204],\n  'darkred': [139, 0, 0],\n  'darksalmon': [233, 150, 122],\n  'darkseagreen': [143, 188, 143],\n  'darkslateblue': [72, 61, 139],\n  'darkslategray': [47, 79, 79],\n  'darkslategrey': [47, 79, 79],\n  'darkturquoise': [0, 206, 209],\n  'darkviolet': [148, 0, 211],\n  'deeppink': [255, 20, 147],\n  'deepskyblue': [0, 191, 255],\n  'dimgray': [105, 105, 105],\n  'dimgrey': [105, 105, 105],\n  'dodgerblue': [30, 144, 255],\n  'firebrick': [178, 34, 34],\n  'floralwhite': [255, 250, 240],\n  'forestgreen': [34, 139, 34],\n  'fuchsia': [255, 0, 255],\n  'gainsboro': [220, 220, 220],\n  'ghostwhite': [248, 248, 255],\n  'gold': [255, 215, 0],\n  'goldenrod': [218, 165, 32],\n  'gray': [128, 128, 128],\n  'green': [0, 128, 0],\n  'greenyellow': [173, 255, 47],\n  'grey': [128, 128, 128],\n  'honeydew': [240, 255, 240],\n  'hotpink': [255, 105, 180],\n  'indianred': [205, 92, 92],\n  'indigo': [75, 0, 130],\n  'ivory': [255, 255, 240],\n  'khaki': [240, 230, 140],\n  'lavender': [230, 230, 250],\n  'lavenderblush': [255, 240, 245],\n  'lawngreen': [124, 252, 0],\n  'lemonchiffon': [255, 250, 205],\n  'lightblue': [173, 216, 230],\n  'lightcoral': [240, 128, 128],\n  'lightcyan': [224, 255, 255],\n  'lightgoldenrodyellow': [250, 250, 210],\n  'lightgray': [211, 211, 211],\n  'lightgreen': [144, 238, 144],\n  'lightgrey': [211, 211, 211],\n  'lightpink': [255, 182, 193],\n  'lightsalmon': [255, 160, 122],\n  'lightseagreen': [32, 178, 170],\n  'lightskyblue': [135, 206, 250],\n  'lightslategray': [119, 136, 153],\n  'lightslategrey': [119, 136, 153],\n  'lightsteelblue': [176, 196, 222],\n  'lightyellow': [255, 255, 224],\n  'lime': [0, 255, 0],\n  'limegreen': [50, 205, 50],\n  'linen': [250, 240, 230],\n  'magenta': [255, 0, 255],\n  'maroon': [128, 0, 0],\n  'mediumaquamarine': [102, 205, 170],\n  'mediumblue': [0, 0, 205],\n  'mediumorchid': [186, 85, 211],\n  'mediumpurple': [147, 112, 219],\n  'mediumseagreen': [60, 179, 113],\n  'mediumslateblue': [123, 104, 238],\n  'mediumspringgreen': [0, 250, 154],\n  'mediumturquoise': [72, 209, 204],\n  'mediumvioletred': [199, 21, 133],\n  'midnightblue': [25, 25, 112],\n  'mintcream': [245, 255, 250],\n  'mistyrose': [255, 228, 225],\n  'moccasin': [255, 228, 181],\n  'navajowhite': [255, 222, 173],\n  'navy': [0, 0, 128],\n  'oldlace': [253, 245, 230],\n  'olive': [128, 128, 0],\n  'olivedrab': [107, 142, 35],\n  'orange': [255, 165, 0],\n  'orangered': [255, 69, 0],\n  'orchid': [218, 112, 214],\n  'palegoldenrod': [238, 232, 170],\n  'palegreen': [152, 251, 152],\n  'paleturquoise': [175, 238, 238],\n  'palevioletred': [219, 112, 147],\n  'papayawhip': [255, 239, 213],\n  'peachpuff': [255, 218, 185],\n  'peru': [205, 133, 63],\n  'pink': [255, 192, 203],\n  'plum': [221, 160, 221],\n  'powderblue': [176, 224, 230],\n  'purple': [128, 0, 128],\n  'rebeccapurple': [102, 51, 153],\n  'red': [255, 0, 0],\n  'rosybrown': [188, 143, 143],\n  'royalblue': [65, 105, 225],\n  'saddlebrown': [139, 69, 19],\n  'salmon': [250, 128, 114],\n  'sandybrown': [244, 164, 96],\n  'seagreen': [46, 139, 87],\n  'seashell': [255, 245, 238],\n  'sienna': [160, 82, 45],\n  'silver': [192, 192, 192],\n  'skyblue': [135, 206, 235],\n  'slateblue': [106, 90, 205],\n  'slategray': [112, 128, 144],\n  'slategrey': [112, 128, 144],\n  'snow': [255, 250, 250],\n  'springgreen': [0, 255, 127],\n  'steelblue': [70, 130, 180],\n  'tan': [210, 180, 140],\n  'teal': [0, 128, 128],\n  'thistle': [216, 191, 216],\n  'tomato': [255, 99, 71],\n  'turquoise': [64, 224, 208],\n  'violet': [238, 130, 238],\n  'wheat': [245, 222, 179],\n  'white': [255, 255, 255],\n  'whitesmoke': [245, 245, 245],\n  'yellow': [255, 255, 0],\n  'yellowgreen': [154, 205, 50]\n};\n\nexport function getColor(string: string) {\n  let rgb = [];\n\n  if (string.match(hex)) {\n    let match = string.match(hex);\n\n    if (match !== null) {\n      // @ts-ignore\n      match = match[1];\n\n      for (let i = 0; i < 3; i++) {\n        // https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n        const i2 = i * 2;\n        // @ts-ignore\n        rgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n      }\n\n      rgb[3] = 1;\n    }\n  } else if (string.match(rgba)) {\n    const match = string.match(rgba);\n    for (let i = 0; i < 3; i++) {\n      // @ts-ignore\n      rgb[i] = parseInt(match[i + 1], 0);\n    }\n\n    // @ts-ignore\n    if (match[4]) {\n      // @ts-ignore\n      rgb[3] = parseFloat(match[4]);\n    } else {\n      rgb[3] = 1;\n    }\n  } else if (string.match(keyword)) {\n    const match = string.match(keyword);\n    // @ts-ignore\n    if (match[1] === 'transparent') {\n      return [0, 0, 0, 0];\n    }\n    // @ts-ignore\n    rgb = colorNames[match[1]];\n    if (!rgb) {\n      return null;\n    }\n    rgb[3] = 1;\n    return rgb;\n  } else {\n    return null;\n  }\n\n  return rgb;\n}\n","// from: https://sourcegraph.com/github.com/IHCantabria/Leaflet.CanvasLayer.Field/-/blob/src/Vector.js?utm_source=share\nexport default class Vector {\n  public u: number;\n  public v: number;\n  public m: number;\n\n  constructor(u: number, v: number) {\n    this.u = u;\n    this.v = v;\n\n    this.m = this.magnitude();\n  }\n\n  /**\n   * the vector value\n   * 向量值（流体强度）\n   * @returns {Number}\n   */\n  public magnitude() {\n    // Math.pow(u, 2)\n    // Math.pow(v, 2)\n    return Math.sqrt(this.u * this.u + this.v * this.v);\n  }\n\n  /**\n   * Angle in degrees (0 to 360º) --> Towards\n   * 流体方向\n   * N is 0º and E is 90º\n   * @returns {Number}\n   */\n  public directionTo() {\n    const verticalAngle = Math.atan2(this.u, this.v);\n    let inDegrees = verticalAngle * (180.0 / Math.PI);\n    if (inDegrees < 0) {\n      inDegrees += 360.0;\n    }\n    return inDegrees;\n  }\n\n  /**\n   * Angle in degrees (0 to 360º) From x-->\n   * N is 0º and E is 90º\n   * @returns {Number}\n   */\n  public directionFrom() {\n    const a = this.directionTo();\n    return (a + 180.0) % 360.0;\n  }\n}\n","import { floorMod } from './utils';\nimport Vector from './Vector';\n\nexport interface IField {\n  xmin: number; // 一般格点数据是按照矩形范围来切割，所以定义其经纬度范围\n  ymin: number;\n  xmax: number;\n  ymax: number;\n  deltaX: number; // x（经度）增量\n  deltaY: number; // y（维度）增量\n  cols: number; // 列（可由 `(xmax - xmin) / deltaX` 得到）\n  rows: number; // 行\n  us: number[]; // U分量\n  vs: number[]; // V分量\n  wrappedX?: boolean; // 当数据范围时按照 [0, 360] 时需要对x方向进行切割转换为 [-180, 180]\n}\n\nexport interface IPosition {\n  age?: number;\n  x?: number;\n  y?: number;\n  xt?: number;\n  yt?: number;\n  m?: number;\n}\n\nexport default class Field {\n  private readonly xmin: number;\n  private readonly xmax: number;\n  private readonly ymin: number;\n  private readonly ymax: number;\n  private readonly cols: number;\n  private readonly rows: number;\n  private readonly us: number[];\n  private readonly vs: number[];\n  private readonly isContinuous: boolean;\n  private readonly deltaY: number;\n  private readonly deltaX: number;\n  private readonly wrappedX: undefined | boolean;\n  private readonly isFields: boolean;\n  public grid: (Vector | null)[][];\n  public range: (number | undefined)[] | undefined;\n\n  constructor(params: IField) {\n    this.grid = [];\n\n    this.xmin = params.xmin;\n    this.xmax = params.xmax;\n\n    this.ymin = params.ymin;\n    this.ymax = params.ymax;\n\n    this.cols = params.cols; // 列数\n    this.rows = params.rows; // 行数\n\n    this.us = params.us; //\n    this.vs = params.vs;\n\n    this.deltaX = params.deltaX; // x 方向增量\n    this.deltaY = params.deltaY; // y方向增量\n\n    if (this.deltaY < 0 && this.ymin < this.ymax) {\n      console.warn('[wind-core]: The data is flipY');\n    } else {\n      this.ymin = Math.min(params.ymax, params.ymin);\n      this.ymax = Math.max(params.ymax, params.ymin);\n    }\n\n    this.isFields = true;\n\n    const cols = Math.ceil((this.xmax - this.xmin) / params.deltaX); // 列\n    const rows = Math.ceil((this.ymax - this.ymin) / params.deltaY); // 行\n\n    if (cols !== this.cols || rows !== this.rows) {\n      console.warn('[wind-core]: The data grid not equal');\n    }\n\n    // Math.floor(ni * Δλ) >= 360;\n    // lon lat 经度 纬度\n    this.isContinuous = Math.floor(this.cols * params.deltaX) >= 360;\n    this.wrappedX = 'wrappedX' in params ? params.wrappedX : this.xmax > 180; // [0, 360] --> [-180, 180];\n\n    this.grid = this.buildGrid();\n    this.range = this.calculateRange();\n  }\n\n  // from https://github.com/sakitam-fdd/wind-layer/blob/95368f9433/src/windy/windy.js#L110\n  public buildGrid(): (Vector | null)[][] {\n    let grid = [];\n    let p = 0;\n\n    const { rows, cols, us, vs } = this;\n\n    for (let j = 0; j < rows; j++) {\n      const row = [];\n      for (let i = 0; i < cols; i++, p++) {\n        let u = us[p];\n        let v = vs[p];\n        let valid = this.isValid(u) && this.isValid(v);\n        row[i] = valid ? new Vector(u, v) : null;\n      }\n\n      if (this.isContinuous) {\n        row.push(row[0]);\n      }\n\n      grid[j] = row;\n    }\n    return grid;\n  }\n\n  public release() {\n    this.grid = [];\n  }\n\n  /**\n   * grib data extent\n   * 格点数据范围\n   */\n  public extent() {\n    return [\n      this.xmin,\n      this.ymin,\n      this.xmax,\n      this.ymax,\n    ]\n  }\n\n  /**\n   * Bilinear interpolation for Vector\n   * 针对向量进行双线性插值\n   * https://en.wikipedia.org/wiki/Bilinear_interpolation\n   * @param   {Number} x\n   * @param   {Number} y\n   * @param   {Number[]} g00\n   * @param   {Number[]} g10\n   * @param   {Number[]} g01\n   * @param   {Number[]} g11\n   * @returns {Vector}\n   */\n  private bilinearInterpolateVector(\n    x: number, y: number,\n    g00: { u: number; v: number; },\n    g10: { u: number; v: number; },\n    g01: { u: number; v: number; },\n    g11: { u: number; v: number; }\n  ) {\n    const rx = 1 - x;\n    const ry = 1 - y;\n\n    const a = rx * ry;\n    const b = x * ry;\n    const c = rx * y;\n    const d = x * y;\n    const u = g00.u * a + g10.u * b + g01.u * c + g11.u * d;\n    const v = g00.v * a + g10.v * b + g01.v * c + g11.v * d;\n    return new Vector(u, v);\n  }\n\n  /**\n   * calculate vector value range\n   */\n  calculateRange() {\n    if (!this.grid || !this.grid[0]) return;\n    const rows = this.grid.length as number;\n    const cols = this.grid[0].length as number;\n\n    // const vectors = [];\n    let min;\n    let max;\n    // @from: https://stackoverflow.com/questions/13544476/how-to-find-max-and-min-in-array-using-minimum-comparisons\n    for (let j = 0; j < rows; j++) {\n      for (let i = 0; i < cols; i++) {\n        const vec = this.grid[j][i];\n\n        if (vec !== null) {\n          const val = vec.m || vec.magnitude();\n          // vectors.push();\n          if (min === undefined) {\n            min = val;\n          } else if (max === undefined) {\n            max = val;\n            // update min max\n            // 1. Pick 2 elements(a, b), compare them. (say a > b)\n            min = Math.min(min, max);\n            max = Math.max(min, max);\n          } else {\n            // 2. Update min by comparing (min, b)\n            // 3. Update max by comparing (max, a)\n            min = Math.min(val, min);\n            max = Math.max(val, max);\n          }\n        }\n      }\n    }\n    return [min, max];\n  }\n\n  /**\n   * 检查 uv是否合法\n   * @param x\n   * @private\n   */\n  public isValid(x: any) {\n    return x !== null && x !== undefined;\n  }\n\n  private getWrappedLongitudes() {\n    let xmin = this.xmin;\n    let xmax = this.xmax;\n\n    if (this.wrappedX) {\n      if (this.isContinuous) {\n        xmin = -180;\n        xmax = 180;\n      } else {\n        // not sure about this (just one particular case, but others...?)\n        xmax = this.xmax - 360;\n        xmin = this.xmin - 360;\n        /* eslint-disable no-console */\n        // console.warn(`are these xmin: ${xmin} & xmax: ${xmax} OK?`);\n        // TODO: Better throw an exception on no-controlled situations.\n        /* eslint-enable no-console */\n      }\n    }\n    return [xmin, xmax];\n  }\n\n  public contains(lon: number, lat: number) {\n    const [xmin, xmax] = this.getWrappedLongitudes();\n    let longitudeIn = lon >= xmin && lon <= xmax;\n    let latitudeIn;\n    if (this.deltaY >= 0) {\n      latitudeIn = lat >= this.ymin && lat <= this.ymax;\n    } else {\n      latitudeIn = lat >= this.ymax && lat <= this.ymin;\n    }\n    return longitudeIn && latitudeIn;\n  }\n\n  /**\n   * 获取经纬度所在的位置索引\n   * @param lon\n   * @param lat\n   */\n  public getDecimalIndexes(lon: number, lat: number) {\n    const i = floorMod(lon - this.xmin, 360) / this.deltaX; // calculate longitude index in wrapped range [0, 360)\n    const j = (this.ymax - lat) / this.deltaY; // calculate latitude index in direction +90 to -90\n    return [i, j];\n  }\n\n  /**\n   * Nearest value at lon-lat coordinates\n   * 线性插值\n   * @param lon\n   * @param lat\n   */\n  public valueAt(lon: number, lat: number) {\n\n    if (!this.contains(lon, lat)) return null;\n\n    const indexes = this.getDecimalIndexes(lon, lat);\n    let ii = Math.floor(indexes[0]);\n    let jj = Math.floor(indexes[1]);\n\n    const ci = this.clampColumnIndex(ii);\n    const cj = this.clampRowIndex(jj);\n\n    return this.valueAtIndexes(ci, cj);\n  }\n\n  /**\n   * Get interpolated grid value lon-lat coordinates\n   * 双线性插值\n   * @param lon\n   * @param lat\n   */\n  public interpolatedValueAt(lon: number, lat: number) {\n    if (!this.contains(lon, lat)) return null;\n\n    let [i, j] = this.getDecimalIndexes(lon, lat);\n    return this.interpolatePoint(i, j);\n  }\n\n  public hasValueAt(lon: number, lat: number) {\n    let value = this.valueAt(lon, lat);\n    return value !== null;\n  }\n\n  /**\n   * 基于向量的双线性插值\n   * @param i\n   * @param j\n   */\n  private interpolatePoint(i: number, j: number) {\n    //         1      2           After converting λ and φ to fractional grid indexes i and j, we find the\n    //        fi  i   ci          four points 'G' that enclose point (i, j). These points are at the four\n    //         | =1.4 |           corners specified by the floor and ceiling of i and j. For example, given\n    //      ---G--|---G--- fj 8   i = 1.4 and j = 8.3, the four surrounding grid points are (1, 8), (2, 8),\n    //    j ___|_ .   |           (1, 9) and (2, 9).\n    //  =8.3   |      |\n    //      ---G------G--- cj 9   Note that for wrapped grids, the first column is duplicated as the last\n    //         |      |           column, so the index ci can be used without taking a modulo.\n    const indexes = this.getFourSurroundingIndexes(i, j);\n    const [fi, ci, fj, cj] = indexes;\n    let values = this.getFourSurroundingValues(fi, ci, fj, cj);\n    if (values) {\n      const [g00, g10, g01, g11] = values;\n      // @ts-ignore\n      return this.bilinearInterpolateVector(i - fi, j - fj, g00, g10, g01, g11);\n    }\n\n    return null;\n  }\n\n  /**\n   * Check the column index is inside the field,\n   * adjusting to min or max when needed\n   * @private\n   * @param   {Number} ii - index\n   * @returns {Number} i - inside the allowed indexes\n   */\n  private clampColumnIndex(ii: number) {\n    let i = ii;\n    if (ii < 0) {\n      i = 0;\n    }\n    let maxCol = this.cols - 1;\n    if (ii > maxCol) {\n      i = maxCol;\n    }\n    return i;\n  }\n\n  /**\n   * Check the row index is inside the field,\n   * adjusting to min or max when needed\n   * @private\n   * @param   {Number} jj index\n   * @returns {Number} j - inside the allowed indexes\n   */\n  private clampRowIndex(jj: number) {\n    let j = jj;\n    if (jj < 0) {\n      j = 0;\n    }\n    let maxRow = this.rows - 1;\n    if (jj > maxRow) {\n      j = maxRow;\n    }\n    return j;\n  }\n\n  /**\n   * from: https://github.com/IHCantabria/Leaflet.CanvasLayer.Field/blob/master/src/Field.js#L252\n   * 计算索引位置周围的数据\n   * @private\n   * @param   {Number} i - decimal index\n   * @param   {Number} j - decimal index\n   * @returns {Array} [fi, ci, fj, cj]\n   */\n  private getFourSurroundingIndexes(i: number, j: number) {\n    let fi = Math.floor(i); // 左\n    let ci = fi + 1; // 右\n    // duplicate colum to simplify interpolation logic (wrapped value)\n    if (this.isContinuous && ci >= this.cols) {\n      ci = 0;\n    }\n    ci = this.clampColumnIndex(ci);\n\n    let fj = this.clampRowIndex(Math.floor(j)); // 上 纬度方向索引（取整）\n    let cj = this.clampRowIndex(fj + 1); // 下\n\n    return [fi, ci, fj, cj];\n  }\n\n  /**\n   * from https://github.com/IHCantabria/Leaflet.CanvasLayer.Field/blob/master/src/Field.js#L277\n   * Get four surrounding values or null if not available,\n   * from 4 integer indexes\n   * @private\n   * @param   {Number} fi\n   * @param   {Number} ci\n   * @param   {Number} fj\n   * @param   {Number} cj\n   * @returns {Array}\n   */\n  private getFourSurroundingValues(fi: number, ci: number, fj: number, cj: number) {\n    let row;\n    if ((row = this.grid[fj])) {\n      const g00 = row[fi]; // << left\n      const g10 = row[ci]; // right >>\n      if (\n        this.isValid(g00) &&\n        this.isValid(g10) &&\n        (row = this.grid[cj])\n      ) {\n        // lower row vv\n        const g01 = row[fi]; // << left\n        const g11 = row[ci]; // right >>\n        if (this.isValid(g01) && this.isValid(g11)) {\n          return [g00, g10, g01, g11]; // 4 values found!\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Value for grid indexes\n   * @param   {Number} i - column index (integer)\n   * @param   {Number} j - row index (integer)\n   * @returns {Vector|Number}\n   */\n  public valueAtIndexes(i: number, j: number) {\n    return this.grid[j][i]; // <-- j,i !!\n  }\n\n  /**\n   * Lon-Lat for grid indexes\n   * @param   {Number} i - column index (integer)\n   * @param   {Number} j - row index (integer)\n   * @returns {Number[]} [lon, lat]\n   */\n  public lonLatAtIndexes(i: number, j: number) {\n    let lon = this.longitudeAtX(i);\n    let lat = this.latitudeAtY(j);\n\n    return [lon, lat];\n  }\n\n  /**\n   * Longitude for grid-index\n   * @param   {Number} i - column index (integer)\n   * @returns {Number} longitude at the center of the cell\n   */\n  private longitudeAtX(i: number) {\n    let halfXPixel = this.deltaX / 2.0;\n    let lon = this.xmin + halfXPixel + i * this.deltaX;\n    if (this.wrappedX) {\n      lon = lon > 180 ? lon - 360 : lon;\n    }\n    return lon;\n  }\n\n  /**\n   * Latitude for grid-index\n   * @param   {Number} j - row index (integer)\n   * @returns {Number} latitude at the center of the cell\n   */\n  private latitudeAtY(j: number) {\n    let halfYPixel = this.deltaY / 2.0;\n    return this.ymax - halfYPixel - j * this.deltaY;\n  }\n\n  /**\n   * 生成粒子位置\n   * @param o\n   * @param width\n   * @param height\n   * @param unproject\n   */\n  public randomize(o: IPosition = {}, width: number, height: number, unproject: (...args: any[]) => ([number, number] | null)) {\n    let i = (Math.random() * (width || this.cols)) | 0;\n    let j = (Math.random() * (height || this.rows)) | 0;\n\n    const coords = unproject([i, j]);\n    if (coords !== null) {\n      o.x = coords[0];\n      o.y = coords[1];\n    } else {\n      o.x = this.longitudeAtX(i);\n      o.y = this.latitudeAtY(j);\n    }\n\n    return o;\n  }\n\n  /**\n   * check is custom field\n   */\n  public checkFields() {\n    return this.isFields;\n  }\n\n  public startBatchInterpolate(width: number, height: number, unproject: (...args: any[]) => ([number, number] | null)) {}\n}\n","import Field from './Field';\nimport { isString, isNumber, isFunction, isValide } from './utils';\n\nexport const defaultOptions = {\n  globalAlpha: 0.9, // 全局透明度\n  lineWidth: 1, // 线条宽度\n  colorScale: '#fff',\n  velocityScale: 1 / 25,\n  // particleAge: 90, // 粒子在重新生成之前绘制的最大帧数\n  maxAge: 90, // alias for particleAge\n  // particleMultiplier: 1 / 300, // TODO: PATHS = Math.round(width * height * particleMultiplier);\n  paths: 800,\n  frameRate: 20,\n  useCoordsDraw: true,\n  gpet: true, // generate particle every times\n};\n\ntype emptyFunc = (v?: any) => number;\ntype emptyGenerateParticleFunc = (v?: any) => boolean;\n\nexport interface IOptions {\n  globalAlpha: number; // 全局透明度\n  lineWidth: number | emptyFunc; // 线条宽度\n  colorScale: string | string[] | emptyFunc;\n  velocityScale: number | emptyFunc;\n  particleAge?: number; // 粒子在重新生成之前绘制的最大帧数\n  maxAge: number; // alias for particleAge\n  particleMultiplier?: number; // TODO: PATHS = Math.round(width * height * that.particleMultiplier);\n  paths: number | emptyFunc;\n  frameRate: number;\n  minVelocity?: number;\n  maxVelocity?: number;\n  useCoordsDraw?: boolean;\n  gpet?: boolean;\n}\n\nfunction indexFor (m: number, min: number, max: number, colorScale: string[]) {  // map velocity speed to a style\n  return Math.max(0, Math.min((colorScale.length - 1),\n    Math.round((m - min) / (max - min) * (colorScale.length - 1))));\n}\n\nclass BaseLayer {\n  private ctx: CanvasRenderingContext2D;\n  private options: IOptions;\n  private field: Field;\n  private particles: any[] = [];\n\n  static Field = Field;\n  private animationLoop: number;\n  private _then: number;\n  private starting: boolean;\n  private generated: boolean = false;\n\n  public forceStop: boolean;\n\n  constructor(ctx: CanvasRenderingContext2D, options: Partial<IOptions>, field?: Field) {\n    this.ctx = ctx;\n\n    if (!this.ctx) {\n      throw new Error('ctx error');\n    }\n\n    this.animate = this.animate.bind(this);\n\n    this.setOptions(options);\n\n    if (field) {\n      this.updateData(field);\n    }\n  }\n\n  public setOptions(options: Partial<IOptions>) {\n    this.options = Object.assign({}, defaultOptions, options);\n\n    const { width, height } = this.ctx.canvas;\n\n    if (('particleAge' in options) && !('maxAge' in options) && isNumber(this.options.particleAge)) {\n      // @ts-ignore\n      this.options.maxAge = this.options.particleAge;\n    }\n\n    if (('particleMultiplier' in options) && !('paths' in options) && isNumber(this.options.particleMultiplier)) {\n      // @ts-ignore\n      this.options.paths = Math.round(width * height * this.options.particleMultiplier);\n    }\n\n    this.prerender();\n  }\n\n  public getOptions() {\n    return this.options;\n  }\n\n  public updateData(field: Field) {\n    this.field = field;\n    if (!this.generated) return;\n    this.particles = this.prepareParticlePaths();\n  }\n\n  private moveParticles() {\n    const { width, height } = this.ctx.canvas;\n    const particles = this.particles;\n    // 清空组\n    const maxAge = this.options.maxAge;\n    const optVelocityScale = isFunction(this.options.velocityScale)\n      // @ts-ignore\n      ? this.options.velocityScale()\n      : this.options.velocityScale;\n    const velocityScale = optVelocityScale;\n\n    let i = 0;\n    let len = particles.length;\n    for (; i < len; i++) {\n      const particle = particles[i];\n\n      if (particle.age > maxAge) {\n        particle.age = 0;\n        // restart, on a random x,y\n        this.field.randomize(particle, width, height, this.unproject);\n      }\n\n      const x = particle.x;\n      const y = particle.y;\n\n      const vector = this.field.interpolatedValueAt(x, y);\n\n      if (vector === null) {\n        particle.age = maxAge;\n      } else {\n        const xt = x + vector.u * velocityScale;\n        const yt = y + vector.v * velocityScale;\n\n        if (this.field.hasValueAt(xt, yt)) {\n          // Path from (x,y) to (xt,yt) is visible, so add this particle to the appropriate draw bucket.\n          particle.xt = xt;\n          particle.yt = yt;\n          particle.m = vector.m;\n        } else {\n          // Particle isn't visible, but it still moves through the field.\n          particle.x = xt;\n          particle.y = yt;\n          particle.age = maxAge;\n        }\n      }\n\n      particle.age++;\n    }\n  }\n\n  private fadeIn() {\n    const prev = this.ctx.globalCompositeOperation; // lighter\n    this.ctx.globalCompositeOperation = 'destination-in';\n    this.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.globalCompositeOperation = prev;\n  }\n\n  private drawParticles() {\n    const particles = this.particles;\n    this.fadeIn();\n    this.ctx.globalAlpha = this.options.globalAlpha;\n\n    this.ctx.fillStyle = `rgba(0, 0, 0, ${this.options.globalAlpha})`;\n    this.ctx.lineWidth = (isNumber(this.options.lineWidth) ? this.options.lineWidth : 1) as number;\n    this.ctx.strokeStyle = (isString(this.options.colorScale) ? this.options.colorScale : '#fff') as string;\n\n    let i = 0;\n    let len = particles.length;\n    if (this.field && len > 0) {\n      let min: number;\n      let max: number;\n      // 如果配置了风速范围\n      if (isValide(this.options.minVelocity) && isValide(this.options.maxVelocity)) {\n        min = this.options.minVelocity as number;\n        max = this.options.maxVelocity as number;\n      } else { // 未配置风速范围取格点数据中的最大风速和最小风速\n        [min, max] = this.field.range as [number, number];\n      }\n      for (; i < len; i++) {\n        this[this.options.useCoordsDraw ? 'drawCoordsParticle' : 'drawPixelParticle'](particles[i], min, max);\n      }\n    }\n  }\n\n  /**\n   * 用于绘制像素粒子\n   * @param particle\n   * @param min\n   * @param max\n   */\n  private drawPixelParticle(particle: any, min: number, max: number) {\n    // TODO 需要判断粒子是否超出视野\n    // this.ctx.strokeStyle = color;\n    const pointPrev: [number, number] = [particle.x, particle.y];\n    // when xt isn't exit\n    const pointNext: [number, number] = [particle.xt, particle.yt];\n\n    if (\n      pointNext && pointPrev && isValide(pointNext[0]) &&\n      isValide(pointNext[1]) && isValide(pointPrev[0]) &&\n      isValide(pointPrev[1])\n      && particle.age <= this.options.maxAge\n    ) {\n      this.ctx.beginPath();\n      this.ctx.moveTo(pointPrev[0], pointPrev[1]);\n      this.ctx.lineTo(pointNext[0], pointNext[1]);\n\n      if (isFunction(this.options.colorScale)) {\n        // @ts-ignore\n        this.ctx.strokeStyle = this.options.colorScale(particle.m) as string;\n      } else if (Array.isArray(this.options.colorScale)) {\n        const colorIdx = indexFor(particle.m, min, max, this.options.colorScale);\n        this.ctx.strokeStyle = this.options.colorScale[colorIdx];\n      }\n\n      if (isFunction(this.options.lineWidth)) {\n        // @ts-ignore\n        this.ctx.lineWidth = this.options.lineWidth(particle.m) as number;\n      }\n\n      particle.x = particle.xt;\n      particle.y = particle.yt;\n\n      this.ctx.stroke();\n    }\n  }\n\n  /**\n   * 用于绘制坐标粒子\n   * @param particle\n   * @param min\n   * @param max\n   */\n  private drawCoordsParticle(particle: any, min: number, max: number) {\n    // TODO 需要判断粒子是否超出视野\n    // this.ctx.strokeStyle = color;\n    const source: [number, number] = [particle.x, particle.y];\n    // when xt isn't exit\n    const target: [number, number] = [particle.xt, particle.yt];\n\n    if (\n      target && source && isValide(target[0]) &&\n      isValide(target[1]) && isValide(source[0]) &&\n      isValide(source[1]) &&\n      this.intersectsCoordinate(target)\n      && particle.age <= this.options.maxAge\n    ) {\n      const pointPrev = this.project(source);\n      const pointNext = this.project(target);\n\n      if (pointPrev && pointNext) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(pointPrev[0], pointPrev[1]);\n        this.ctx.lineTo(pointNext[0], pointNext[1]);\n        particle.x = particle.xt;\n        particle.y = particle.yt;\n\n        if (isFunction(this.options.colorScale)) {\n          // @ts-ignore\n          this.ctx.strokeStyle = this.options.colorScale(particle.m) as string;\n        } else if (Array.isArray(this.options.colorScale)) {\n          const colorIdx = indexFor(particle.m, min, max, this.options.colorScale);\n          this.ctx.strokeStyle = this.options.colorScale[colorIdx];\n        }\n\n        if (isFunction(this.options.lineWidth)) {\n          // @ts-ignore\n          this.ctx.lineWidth = this.options.lineWidth(particle.m) as number;\n        }\n\n        this.ctx.stroke();\n      }\n    }\n  }\n\n  private prepareParticlePaths() { // 由用户自行处理，不再自动修改粒子数\n    const { width, height } = this.ctx.canvas;\n    const particleCount = typeof this.options.paths === 'function' ? this.options.paths(this) : this.options.paths;\n    const particles = [];\n    if (!this.field) return [];\n    if ('startBatchInterpolate' in this.field) {\n      this.field.startBatchInterpolate(width, height, this.unproject);\n    }\n    let i = 0;\n    for (; i < particleCount; i++) {\n      particles.push(this.field.randomize({\n        age: this.randomize()\n      }, width, height, this.unproject));\n    }\n    return particles;\n  }\n\n  private randomize() {\n    return Math.floor(Math.random() * this.options.maxAge); // 例如最大生成90帧插值粒子路径\n  }\n\n  // @ts-ignore\n  project(...args: any[]): [number, number] | null {\n    throw new Error('project must be overriden');\n  }\n\n  // @ts-ignore\n  unproject(...args: any[]): [number, number] | null {\n    throw new Error('unproject must be overriden');\n  }\n\n  intersectsCoordinate(coordinates: [number, number]): boolean {\n    throw new Error('must be overriden');\n  }\n\n  public clearCanvas() {\n    this.stop();\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.forceStop = false;\n  }\n\n  start() {\n    this.starting = true;\n    this.forceStop = false;\n    this._then = Date.now();\n    this.animate();\n  }\n\n  stop() {\n    cancelAnimationFrame(this.animationLoop);\n    this.starting = false;\n    this.forceStop = true;\n  }\n\n  animate() {\n    if (this.animationLoop) cancelAnimationFrame(this.animationLoop);\n    this.animationLoop = requestAnimationFrame(this.animate);\n    const now = Date.now();\n    const delta = now - this._then;\n    if (delta > this.options.frameRate) {\n      this._then = now - (delta % this.options.frameRate);\n      this.render();\n    }\n  }\n\n  /**\n   * 渲染前处理\n   */\n  prerender() {\n    this.generated = false;\n    if (!this.field) return;\n    this.particles = this.prepareParticlePaths();\n    this.generated = true;\n\n    if (!this.starting && !this.forceStop) {\n      this.starting = true;\n      this._then = Date.now();\n      this.animate();\n    }\n  }\n\n  /**\n   * 开始渲染\n   */\n  render() {\n    this.moveParticles();\n    this.drawParticles();\n    this.postrender();\n  }\n\n  /**\n   * each frame render end\n   */\n  postrender() {}\n}\n\nexport { default as Field } from './Field';\nexport { default as Vector } from './Vector';\nexport * from './utils';\n\nexport default BaseLayer;\n","import * as Cesium from 'cesium/Cesium';\r\nimport WindCore, {assign, defaultOptions, Field, formatData, isArray, removeDomNode,} from 'wind-core';\r\n\r\nclass CesiumWind {\r\n  constructor(data, options = {}) {\r\n    this.canvas = null;\r\n    this.wind = null;\r\n    this.field = null;\r\n    this.viewer = null;\r\n    this.options = assign({}, options);\r\n    this.pickWindOptions();\r\n\r\n    const canvas = document.createElement('canvas');\r\n    canvas.style.cssText =\r\n      'position:absolute; left:0; top:0;user-select:none;pointer-events: none;';\r\n    canvas.className = 'cesium-wind-j';\r\n    this.canvas = canvas;\r\n\r\n    if (data) {\r\n      this.setData(data);\r\n    }\r\n  }\r\n\r\n  addTo(viewer) {\r\n    this.viewer = viewer;\r\n    this.appendCanvas();\r\n    this.render(this.canvas);\r\n  }\r\n\r\n  remove() {\r\n    if (!this.viewer) {\r\n      return;\r\n    }\r\n    if (this.wind) {\r\n      this.wind.stop();\r\n    }\r\n    if (this.canvas) {\r\n      removeDomNode(this.canvas);\r\n    }\r\n    delete this.canvas;\r\n  }\r\n\r\n  removeLayer() {\r\n    this.remove();\r\n  }\r\n\r\n  setData(data) {\r\n    if (data && data.checkFields && data.checkFields()) {\r\n      this.field = data;\r\n    } else if (isArray(data)) {\r\n      this.field = formatData(data);\r\n    } else {\r\n      console.error('Illegal data');\r\n    }\r\n\r\n    if (this.viewer && this.canvas && this.field) {\r\n      this.wind.updateData(this.field);\r\n      this.appendCanvas();\r\n      this.render(this.canvas);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getData() {\r\n    return this.field;\r\n  }\r\n\r\n  getWindOptions() {\r\n    return this.options.windOptions || {};\r\n  }\r\n\r\n  pickWindOptions() {\r\n    Object.keys(defaultOptions).forEach((key) => {\r\n      if (key in this.options) {\r\n        if (this.options.windOptions === undefined) {\r\n          this.options.windOptions = {};\r\n        }\r\n        this.options.windOptions[key] = this.options[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  getContext() {\r\n    if (this.canvas === null) {\r\n      return;\r\n    }\r\n    return this.canvas.getContext('2d');\r\n  }\r\n\r\n  appendCanvas() {\r\n    if (!this.viewer || !this.canvas) {\r\n      return;\r\n    }\r\n    if (document.querySelector('.cesium-wind-j')) {\r\n      return;\r\n    }\r\n    this.adjustSize();\r\n    const cesiumWidget = this.viewer.canvas.parentNode;\r\n    cesiumWidget.appendChild(this.canvas);\r\n  }\r\n\r\n  adjustSize() {\r\n    const viewer = this.viewer;\r\n    const canvas = this.canvas;\r\n    const {width, height} = viewer.canvas;\r\n    const devicePixelRatio = 1;\r\n    canvas.width = width * devicePixelRatio;\r\n    canvas.height = height * devicePixelRatio;\r\n    canvas.style.width = width + 'px';\r\n    canvas.style.height = height + 'px';\r\n  }\r\n\r\n  render(canvas) {\r\n    if (!this.getData() || !this.viewer) {\r\n      return this;\r\n    }\r\n    const opt = this.getWindOptions();\r\n    if (canvas && !this.wind) {\r\n      const data = this.getData();\r\n\r\n      const ctx = this.getContext();\r\n\r\n      if (ctx) {\r\n        this.wind = new WindCore(ctx, opt, data);\r\n\r\n        this.wind.project = this.project.bind(this);\r\n        this.wind.unproject = this.unproject.bind(this);\r\n        this.wind.intersectsCoordinate = this.intersectsCoordinate.bind(this);\r\n        this.wind.postrender = () => {\r\n        };\r\n      }\r\n    }\r\n\r\n    if (this.wind) {\r\n      this.wind.prerender();\r\n      this.wind.render();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  project(coordinate) {\r\n    const position = Cesium.Cartesian3.fromDegrees(\r\n      coordinate[0],\r\n      coordinate[1],\r\n    );\r\n    const scene = this.viewer.scene;\r\n    const sceneCoor = Cesium.SceneTransforms.wgs84ToWindowCoordinates(\r\n      scene,\r\n      position,\r\n    );\r\n    return [sceneCoor.x, sceneCoor.y];\r\n  }\r\n\r\n  unproject(pixel) {\r\n    const viewer = this.viewer;\r\n    const pick = new Cesium.Cartesian2(pixel[0], pixel[1]);\r\n    const cartesian = viewer.scene.globe.pick(\r\n      viewer.camera.getPickRay(pick),\r\n      viewer.scene,\r\n    );\r\n\r\n    if (!cartesian) {\r\n      return null;\r\n    }\r\n\r\n    const ellipsoid = viewer.scene.globe.ellipsoid;\r\n    const cartographic = ellipsoid.cartesianToCartographic(cartesian);\r\n    const lat = Cesium.Math.toDegrees(cartographic.latitude);\r\n    const lng = Cesium.Math.toDegrees(cartographic.longitude);\r\n    return [lng, lat];\r\n  }\r\n\r\n  intersectsCoordinate(coordinate) {\r\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\r\n    const camera = this.viewer.camera;\r\n    const occluder = new Cesium.EllipsoidalOccluder(ellipsoid, camera.position);\r\n    const point = Cesium.Cartesian3.fromDegrees(coordinate[0], coordinate[1]);\r\n    return occluder.isPointVisible(point);\r\n  }\r\n}\r\n\r\nconst WindLayer = CesiumWind;\r\n\r\nexport {Field, WindLayer};\r\n\r\nexport default CesiumWind;\r\n"],"names":["arguments","WindCore","Cesium.Cartesian3","Cesium.SceneTransforms","Cesium.Cartesian2","Cesium.Math","Cesium.Ellipsoid","Cesium.EllipsoidalOccluder"],"mappings":"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"}